# Alpha Arena - å¤šç­–ç•¥æ™ºèƒ½ä½“äº¤æ˜“ç³»ç»Ÿæ¶æ„è®¾è®¡

> **ç‰ˆæœ¬**: v2.0  
> **æ›´æ–°æ—¥æœŸ**: 2026-01-03  
> **è®¾è®¡ç†å¿µ**: å¤§æ¨¡å‹é©±åŠ¨çš„å¤šç­–ç•¥è‡ªé€‚åº”äº¤æ˜“ç³»ç»Ÿ

---

## ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#1-ç³»ç»Ÿæ¦‚è¿°)
2. [æ ¸å¿ƒè®¾è®¡ç†å¿µ](#2-æ ¸å¿ƒè®¾è®¡ç†å¿µ)
3. [ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
4. [ç­–ç•¥åº“è®¾è®¡](#4-ç­–ç•¥åº“è®¾è®¡)
5. [å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å™¨](#5-å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å™¨)
6. [å¼ºåŒ–å­¦ä¹ æœºåˆ¶](#6-å¼ºåŒ–å­¦ä¹ æœºåˆ¶)
7. [å®Œæ•´å·¥ä½œæµç¨‹](#7-å®Œæ•´å·¥ä½œæµç¨‹)
8. [æŠ€æœ¯å®ç°æ–¹æ¡ˆ](#8-æŠ€æœ¯å®ç°æ–¹æ¡ˆ)

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

æ„å»ºä¸€ä¸ª**è‡ªé€‚åº”çš„å¤šç­–ç•¥æ™ºèƒ½ä½“äº¤æ˜“ç³»ç»Ÿ**ï¼Œèƒ½å¤Ÿï¼š

- ğŸ“š ç»´æŠ¤ BTC å•å¸ç§ç­–ç•¥åº“ï¼ˆä»¥ `æ¶æ„è®¾è®¡/BITCOIN_STRATEGY_LIBRARY.md` ä¸ºå‡†ï¼‰
- ğŸ¤– LLM ä»…åšç­–ç•¥é€‰æ‹©ï¼ˆä¸æ”¹ç­–ç•¥å‚æ•°ï¼‰
- ğŸ“Š æ ¹æ®å¸‚åœºä¿¡å·åŠ¨æ€åˆ‡æ¢ç­–ç•¥
- ğŸ§ª ç¦»çº¿è®­ç»ƒä¸è¯„ä¼°ï¼Œå®šæœŸå‘å¸ƒç­–ç•¥è¯„åˆ†/Prompt ç‰ˆæœ¬
- ğŸ›¡ï¸ é£é™©ç®¡ç† + è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç† + æ‰§è¡Œåé¦ˆ

### 1.2 æ ¸å¿ƒä¼˜åŠ¿

| ä¼ ç»Ÿç³»ç»Ÿ | å¤šç­–ç•¥æ™ºèƒ½ä½“ç³»ç»Ÿ |
|---------|----------------|
| å•ä¸€ç­–ç•¥ | å¤šç­–ç•¥åŠ¨æ€åˆ‡æ¢ |
| äººå·¥è°ƒå‚ | å¤§æ¨¡å‹è‡ªåŠ¨é€‰æ‹© |
| å›ºå®šè§„åˆ™ | è‡ªé€‚åº”å­¦ä¹  |
| è¢«åŠ¨æ‰§è¡Œ | ä¸»åŠ¨ä¼˜åŒ– |

---

## 2. æ ¸å¿ƒè®¾è®¡ç†å¿µ

### 2.1 ä¸‰å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å±‚                        â”‚
â”‚  (æ ¹æ®å¸‚åœºä¿¡å·ã€æŠ€æœ¯åˆ†æã€å†å²è¡¨ç°é€‰æ‹©æœ€ä¼˜ç­–ç•¥)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç­–ç•¥æ‰§è¡Œå±‚                          â”‚
â”‚  (è¶‹åŠ¿è·Ÿè¸ªã€å‡å€¼å›å½’ã€çªç ´ã€ç½‘æ ¼ã€èµ„é‡‘è´¹ç‡ç­‰ç­–ç•¥)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¦»çº¿è®­ç»ƒä¸åé¦ˆå±‚                          â”‚
â”‚  (ç¦»çº¿è®­ç»ƒ/è¯„ä¼°ï¼Œå®šæœŸæ›´æ–°ç­–ç•¥è¯„åˆ†ä¸ Prompt)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç»„ä»¶

1. **å¸‚åœºæ•°æ®æº** - BTC æ°¸ç»­è¡Œæƒ…ã€Kçº¿ã€è®¢å•ç°¿
2. **æŠ€æœ¯åˆ†æå¼•æ“** - æŒ‡æ ‡è®¡ç®—ã€å½¢æ€è¯†åˆ«
3. **ç­–ç•¥åº“** - BTC å•å¸ç§ç­–ç•¥ä¸å‚æ•°
4. **å¤§æ¨¡å‹é€‰æ‹©å™¨** - ä»…é€‰æ‹©ç­–ç•¥ï¼ˆä¸æ”¹å‚æ•°ï¼‰
5. **ç­–ç•¥æ‰§è¡Œå™¨** - ç”Ÿæˆäº¤æ˜“ä¿¡å·ä¸ä»“ä½
6. **é£é™©ç®¡ç†å™¨** - ç¡¬é™åˆ¶ä¸å¤šå±‚é£æ§
7. **è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨** - è®¢å•çŠ¶æ€æœºã€å¹‚ç­‰ã€æ’¤å•/é‡è¯•
8. **OrderExecutor** - OKX æ¨¡æ‹Ÿç›˜/å›æµ‹æ’®åˆåŒå®ç°
9. **æ‰§è¡Œåé¦ˆç³»ç»Ÿ** - è®°å½•ç»“æœä¸è¯„ä¼°
10. **ç¦»çº¿è®­ç»ƒæ¨¡å—** - å®šæœŸè®­ç»ƒ/è¯„ä¼°ä¸å‘å¸ƒ

---

## 3. ç³»ç»Ÿæ¶æ„

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¸‚åœºæ•°æ®æº                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ å®æ—¶è¡Œæƒ…  â”‚  â”‚  Kçº¿æ•°æ®  â”‚  â”‚  è®¢å•ç°¿   â”‚  â”‚  æˆäº¤è®°å½• â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æŠ€æœ¯åˆ†æå¼•æ“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æŠ€æœ¯æŒ‡æ ‡: EMA, RSI, MACD, å¸ƒæ—å¸¦, ATR, KDJ, OBV...      â”‚  â”‚
â”‚  â”‚ å½¢æ€è¯†åˆ«: å¤´è‚©é¡¶åº•, åŒé¡¶åŒåº•, ä¸‰è§’å½¢, æ¥”å½¢...            â”‚  â”‚
â”‚  â”‚ å¸‚åœºçŠ¶æ€: è¶‹åŠ¿å¼ºåº¦, æ³¢åŠ¨ç‡, æ”¯æ’‘é˜»åŠ›, æˆäº¤é‡åˆ†æ...      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å™¨ (æ ¸å¿ƒ)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è¾“å…¥:                                                     â”‚  â”‚
â”‚  â”‚  - å¸‚åœºæ•°æ® (ä»·æ ¼ã€æˆäº¤é‡ã€è®¢å•ç°¿)                        â”‚  â”‚
â”‚  â”‚  - æŠ€æœ¯æŒ‡æ ‡ (EMA, RSI, MACD, å¸ƒæ—å¸¦...)                  â”‚  â”‚
â”‚  â”‚  - å¸‚åœºçŠ¶æ€ (è¶‹åŠ¿ã€æ³¢åŠ¨ç‡ã€æ”¯æ’‘é˜»åŠ›)                      â”‚  â”‚
â”‚  â”‚  - å†å²ç­–ç•¥è¡¨ç° (èƒœç‡ã€æ”¶ç›Šç‡ã€å¤æ™®ç‡)                    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ å¤§æ¨¡å‹æ¨ç†:                                               â”‚  â”‚
â”‚  â”‚  1. åˆ†æå½“å‰å¸‚åœºç¯å¢ƒ                                      â”‚  â”‚
â”‚  â”‚  2. è¯„ä¼°å„ç­–ç•¥é€‚ç”¨æ€§                                      â”‚  â”‚
â”‚  â”‚  3. é€‰æ‹©æœ€ä¼˜ç­–ç•¥                                          â”‚  â”‚
â”‚  â”‚  4. ç”Ÿæˆé€‰æ‹©ç†ç”±                                          â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ è¾“å‡º:                                                     â”‚  â”‚
â”‚  â”‚  - é€‰ä¸­çš„ç­–ç•¥ (e.g., "è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥")                      â”‚  â”‚
â”‚  â”‚  - ç½®ä¿¡åº¦ (0-1)                                           â”‚  â”‚
â”‚  â”‚  - æ¨ç†è¿‡ç¨‹ (æ–‡æœ¬è§£é‡Š)                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç­–ç•¥åº“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è¶‹åŠ¿è·Ÿè¸ª    â”‚  â”‚ å‡å€¼å›å½’    â”‚  â”‚ çªç ´ç­–ç•¥    â”‚  â”‚ ç½‘æ ¼äº¤æ˜“  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ åŠ¨é‡ç­–ç•¥    â”‚  â”‚ èµ„é‡‘è´¹ç‡    â”‚  â”‚ é“¾ä¸Šä¿¡å·    â”‚  â”‚ æ³¢åŠ¨ç‡    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç­–ç•¥æ‰§è¡Œå™¨                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. åŠ è½½é€‰ä¸­çš„ç­–ç•¥                                         â”‚  â”‚
â”‚  â”‚ 2. åŠ è½½ç­–ç•¥é»˜è®¤å‚æ•°/é£æ§è¦†ç›–                              â”‚  â”‚
â”‚  â”‚ 3. ç”Ÿæˆäº¤æ˜“ä¿¡å· (ä¹°å…¥/å–å‡º/æŒæœ‰)                          â”‚  â”‚
â”‚  â”‚ 4. è®¡ç®—ä»“ä½å¤§å°                                           â”‚  â”‚
â”‚  â”‚ 5. è®¾ç½®æ­¢æŸæ­¢ç›ˆ                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é£é™©ç®¡ç†å™¨                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å¤šå±‚é£æ§æ£€æŸ¥:                                             â”‚  â”‚
â”‚  â”‚  - æ æ†æ£€æŸ¥ (ä¸è¶…è¿‡æœ€å¤§æ æ†)                              â”‚  â”‚
â”‚  â”‚  - ä»“ä½æ£€æŸ¥ (å•ç¬”ä¸è¶…è¿‡æ€»èµ„é‡‘ X%)                         â”‚  â”‚
â”‚  â”‚  - æ­¢æŸæ£€æŸ¥ (å¿…é¡»è®¾ç½®æ­¢æŸ)                                â”‚  â”‚
â”‚  â”‚  - æµåŠ¨æ€§æ£€æŸ¥ (ç¡®ä¿æœ‰è¶³å¤ŸæµåŠ¨æ€§)                          â”‚  â”‚
â”‚  â”‚  - å¸‚åœºçŠ¶æ€æ£€æŸ¥ (æç«¯è¡Œæƒ…æš‚åœäº¤æ˜“)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      äº¤æ˜“æ‰§è¡Œ                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ OrderExecutor: OKX æ¨¡æ‹Ÿç›˜æ°¸ç»­ï¼ˆå½“å‰ï¼‰                     â”‚  â”‚
â”‚  â”‚ BacktestOrderExecutor: æ’®åˆå¼•æ“ï¼ˆæ»‘ç‚¹/éƒ¨åˆ†æˆäº¤/æ‰‹ç»­è´¹ï¼‰     â”‚  â”‚
â”‚  â”‚ å®ç›˜åˆ‡æ¢: æ›¿æ¢ä¸º OKX å®ç›˜é…ç½®ï¼ˆæ¥å£ä¸å˜ï¼‰                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ‰§è¡Œåé¦ˆç³»ç»Ÿ                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è®°å½•:                                                     â”‚  â”‚
â”‚  â”‚  - é€‰æ‹©çš„ç­–ç•¥                                             â”‚  â”‚
â”‚  â”‚  - å¸‚åœºç¯å¢ƒ (å½“æ—¶çš„æŒ‡æ ‡ã€çŠ¶æ€)                            â”‚  â”‚
â”‚  â”‚  - æ‰§è¡Œç»“æœ (ç›ˆäºã€æŒä»“æ—¶é—´)                              â”‚  â”‚
â”‚  â”‚  - ç­–ç•¥è¡¨ç° (èƒœç‡ã€æ”¶ç›Šç‡ã€å¤æ™®ç‡)                        â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ åˆ†æ:                                                     â”‚  â”‚
â”‚  â”‚  - å“ªäº›ç­–ç•¥åœ¨å“ªäº›å¸‚åœºç¯å¢ƒä¸‹è¡¨ç°å¥½                         â”‚  â”‚
â”‚  â”‚  - å¤§æ¨¡å‹çš„é€‰æ‹©å‡†ç¡®ç‡                                     â”‚  â”‚
â”‚  â”‚  - éœ€è¦è°ƒæ•´çš„å‚æ•°                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¦»çº¿è®­ç»ƒæ¨¡å—                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç›®æ ‡: ç¦»çº¿è®­ç»ƒä¸è¯„ä¼°ç­–ç•¥é€‰æ‹©                               â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ æ–¹æ³•:                                                     â”‚  â”‚
â”‚  â”‚  1. æ„å»ºçŠ¶æ€ç©ºé—´ (å¸‚åœºç‰¹å¾ + æŠ€æœ¯æŒ‡æ ‡)                    â”‚  â”‚
â”‚  â”‚  2. å®šä¹‰åŠ¨ä½œç©ºé—´ (é€‰æ‹©å“ªä¸ªç­–ç•¥)                           â”‚  â”‚
â”‚  â”‚  3. è®¾è®¡å¥–åŠ±å‡½æ•° (æ”¶ç›Šç‡ + å¤æ™®ç‡ - å›æ’¤)                 â”‚  â”‚
â”‚  â”‚  4. è®­ç»ƒ DQN/PPO æ¨¡å‹                                     â”‚  â”‚
â”‚  â”‚  5. ç”Ÿæˆ Prompt æ›´æ–°å»ºè®®ï¼ˆç¦»çº¿å‘å¸ƒï¼‰                      â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ è¾“å‡º:                                                     â”‚  â”‚
â”‚  â”‚  - ä¼˜åŒ–åçš„ç­–ç•¥è¯„åˆ†/é€‰æ‹©æ¦‚ç‡                               â”‚  â”‚
â”‚  â”‚  - Prompt ç‰ˆæœ¬ä¸å‘å¸ƒè¯´æ˜                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    (å¾ªç¯: æŒç»­å­¦ä¹ å’Œä¼˜åŒ–)
```

### 3.2 æ•°æ®å­˜å‚¨ä¸æ•°æ®åº“

- **MarketDataDB**: ä¿å­˜å†å² K çº¿/æˆäº¤é‡/è®¢å•ç°¿å¿«ç…§ï¼ˆç”¨äºå›æµ‹ä¸ç‰¹å¾æ„å»ºï¼‰
- **TradingDB**: ä¿å­˜ç­–ç•¥é€‰æ‹©ã€è®¢å•ã€æˆäº¤ã€æŒä»“ã€é£æ§äº‹ä»¶ä¸æ‰§è¡Œå›æ‰§
- **å›æµ‹è¯»å–è·¯å¾„**: BacktestOrderExecutor ä» MarketDataDB è¯»å–å†å²æ•°æ®å¹¶å†™å…¥å›æµ‹ç»“æœ
- **å®ç›˜/æ¨¡æ‹Ÿç›˜**: OrderExecutor çš„å›æ‰§ç»Ÿä¸€å†™å…¥ TradingDBï¼Œä¾¿äºå¤ç›˜ä¸ç¦»çº¿è®­ç»ƒ
- **çœŸæºæ–‡æ¡£**: æ•°æ®åº“è§„åˆ’è§ `æ¶æ„è®¾è®¡/DB_PLAN.md`

---

## 4. ç­–ç•¥åº“è®¾è®¡

### 4.1 çœŸæºä¸èŒƒå›´

- ç­–ç•¥æ˜ç»†ã€å‚æ•°ä¸é£æ§é˜ˆå€¼ä»¥ `æ¶æ„è®¾è®¡/BITCOIN_STRATEGY_LIBRARY.md` ä¸ºå‡†
- ä»…æ”¯æŒ BTC å•å¸ç§ï¼ˆOKX æ°¸ç»­æ¨¡æ‹Ÿç›˜ï¼‰
- ä¸æ”¯æŒå¤šäº¤æ˜“æ‰€/è·¨äº¤æ˜“æ‰€å¥—åˆ©/å¤šå¸ç§ç­–ç•¥
- LLM åªè´Ÿè´£é€‰æ‹©ç­–ç•¥ï¼Œä¸ä¿®æ”¹ç­–ç•¥å‚æ•°

### 4.2 å¯ç”¨ç­–ç•¥ç±»å‹ï¼ˆBTC å•å¸ç§ï¼‰

1. è¶‹åŠ¿è·Ÿè¸ª
2. éœ‡è¡åŒºé—´
3. çªç ´äº¤æ˜“
4. èµ„é‡‘è´¹ç‡å¥—åˆ©ï¼ˆåŒäº¤æ˜“æ‰€ç°è´§/æ°¸ç»­ï¼‰
5. ç½‘æ ¼äº¤æ˜“
6. åŠ¨é‡äº¤æ˜“
7. å‡å€¼å›å½’
8. é“¾ä¸Šä¿¡å·
9. æ—¶é—´å‘¨æœŸ
10. æ³¢åŠ¨ç‡äº¤æ˜“

### 4.3 å‚æ•°ä¸é£æ§çº¦æŸ

- ç­–ç•¥å‚æ•°æ¥è‡ªç­–ç•¥å®ç°ä¸é£æ§é»˜è®¤å€¼
- ä»»æ„å˜æ›´éœ€é€šè¿‡ç¡¬é™åˆ¶æ ¡éªŒï¼ˆMAX_LEVERAGE/MAX_POSITION/MAX_RISKï¼‰

---

## 5. å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å™¨

### 5.1 è®¾è®¡æ€è·¯

å¤§æ¨¡å‹ä½œä¸º**ç­–ç•¥é€‰æ‹©çš„å¤§è„‘**ï¼Œè´Ÿè´£ï¼š

1. **åˆ†æå¸‚åœºç¯å¢ƒ** - ç†è§£å½“å‰å¸‚åœºçŠ¶æ€
2. **è¯„ä¼°ç­–ç•¥é€‚ç”¨æ€§** - åˆ¤æ–­å“ªäº›ç­–ç•¥é€‚åˆå½“å‰å¸‚åœº
3. **é€‰æ‹©æœ€ä¼˜ç­–ç•¥æˆ–ç»„åˆ** - è¾“å‡ºå•ç­–ç•¥æˆ–å¤šç­–ç•¥æƒé‡
4. **ç”Ÿæˆé€‰æ‹©ç†ç”±** - æä¾›å¯è§£é‡Šçš„æ¨ç†è¿‡ç¨‹
5. **è¾“å‡ºé£æ§æç¤º** - æé†’å½“å‰é£é™©ä¸æ³¨æ„äº‹é¡¹

### 5.2 Prompt è®¾è®¡

```python
# decision/llm_strategy_selector.py
# Schema: StrategySelection (Pydantic)

class LLMStrategySelector:
    """å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å™¨"""
    
    def __init__(self, llm_client):
        self.llm_client = llm_client
        self.strategy_library = StrategyLibrary()
    
    def build_selection_prompt(
        self,
        market_data: Dict,
        technical_analysis: Dict,
        historical_performance: Dict
    ) -> str:
        """æ„å»ºç­–ç•¥é€‰æ‹© Prompt"""
        
        prompt = f"""
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é‡åŒ–äº¤æ˜“ç­–ç•¥é€‰æ‹©ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®å½“å‰å¸‚åœºç¯å¢ƒ,ä»ç­–ç•¥åº“ä¸­é€‰æ‹©æœ€ä¼˜çš„äº¤æ˜“ç­–ç•¥ã€‚

## å½“å‰å¸‚åœºæ•°æ®

**åŸºæœ¬ä¿¡æ¯**:
- äº¤æ˜“å¯¹: {market_data['symbol']}
- å½“å‰ä»·æ ¼: ${market_data['price']:,.2f}
- 24hæ¶¨è·Œå¹…: {market_data['change_24h']:.2f}%
- 24hæˆäº¤é‡: ${market_data['volume_24h']:,.0f}
- 24hæœ€é«˜ä»·: ${market_data['high_24h']:,.2f}
- 24hæœ€ä½ä»·: ${market_data['low_24h']:,.2f}

## æŠ€æœ¯åˆ†ææŒ‡æ ‡

**è¶‹åŠ¿æŒ‡æ ‡**:
- EMA(5): ${technical_analysis['ema_5']:,.2f}
- EMA(20): ${technical_analysis['ema_20']:,.2f}
- EMA(50): ${technical_analysis['ema_50']:,.2f}
- MACD: {technical_analysis['macd']:.2f}
- MACDä¿¡å·çº¿: {technical_analysis['macd_signal']:.2f}
- MACDæŸ±çŠ¶å›¾: {technical_analysis['macd_hist']:.2f}

**éœ‡è¡æŒ‡æ ‡**:
- RSI(14): {technical_analysis['rsi']:.2f}
- KDJ-K: {technical_analysis['kdj_k']:.2f}
- KDJ-D: {technical_analysis['kdj_d']:.2f}
- KDJ-J: {technical_analysis['kdj_j']:.2f}

**æ³¢åŠ¨ç‡æŒ‡æ ‡**:
- å¸ƒæ—å¸¦ä¸Šè½¨: ${technical_analysis['bb_upper']:,.2f}
- å¸ƒæ—å¸¦ä¸­è½¨: ${technical_analysis['bb_middle']:,.2f}
- å¸ƒæ—å¸¦ä¸‹è½¨: ${technical_analysis['bb_lower']:,.2f}
- ATR(14): ${technical_analysis['atr']:.2f}
- æ³¢åŠ¨ç‡: {technical_analysis['volatility']:.2f}%

**æˆäº¤é‡æŒ‡æ ‡**:
- OBV: {technical_analysis['obv']:,.0f}
- æˆäº¤é‡MA(20): {technical_analysis['volume_ma']:,.0f}
- æˆäº¤é‡æ¯”ç‡: {technical_analysis['volume_ratio']:.2f}

**å¸‚åœºçŠ¶æ€åˆ¤æ–­**:
- è¶‹åŠ¿æ–¹å‘: {technical_analysis['trend_direction']}  # "ä¸Šå‡", "ä¸‹é™", "éœ‡è¡"
- è¶‹åŠ¿å¼ºåº¦: {technical_analysis['trend_strength']}  # "å¼º", "ä¸­", "å¼±"
- æ³¢åŠ¨ç¨‹åº¦: {technical_analysis['volatility_level']}  # "é«˜", "ä¸­", "ä½"
- æ”¯æ’‘ä½: ${technical_analysis['support']:,.2f}
- é˜»åŠ›ä½: ${technical_analysis['resistance']:,.2f}

## å¯ç”¨ç­–ç•¥åº“

{self._format_strategy_library()}

## å†å²ç­–ç•¥è¡¨ç°

{self._format_historical_performance(historical_performance)}

## ä½ çš„ä»»åŠ¡

è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯,å®Œæˆä»¥ä¸‹ä»»åŠ¡:

1. **åˆ†æå½“å‰å¸‚åœºç¯å¢ƒ** (100-200å­—)
   - å½“å‰å¸‚åœºå¤„äºä»€ä¹ˆçŠ¶æ€? (è¶‹åŠ¿/éœ‡è¡/çªç ´)
   - ä¸»è¦ç‰¹å¾æ˜¯ä»€ä¹ˆ? (å¼ºè¶‹åŠ¿/é«˜æ³¢åŠ¨/ä½æµåŠ¨æ€§)
   - æœ‰å“ªäº›å…³é”®ä¿¡å·? (é‡‘å‰/æ­»å‰/è¶…ä¹°è¶…å–/çªç ´)

2. **è¯„ä¼°ç­–ç•¥é€‚ç”¨æ€§** (200-300å­—)
   - å“ªäº›ç­–ç•¥ç±»å‹é€‚åˆå½“å‰å¸‚åœº?
   - ä¸ºä»€ä¹ˆè¿™äº›ç­–ç•¥é€‚åˆ?
   - å“ªäº›ç­–ç•¥ä¸é€‚åˆ? ä¸ºä»€ä¹ˆ?

3. **é€‰æ‹©æœ€ä¼˜ç­–ç•¥/ç»„åˆ** (å¿…é¡»è¿”å›JSONæ ¼å¼)
   - ä»ç­–ç•¥åº“ä¸­é€‰æ‹©1-3ä¸ªç­–ç•¥
   - ç»™å‡ºæƒé‡ï¼ˆsum=1.0ï¼‰
   - ä¸è¦ä¿®æ”¹ç­–ç•¥å‚æ•°ï¼ˆå‚æ•°ç”±ç­–ç•¥å®ç°ä¸é£æ§å†³å®šï¼‰
   - è¯´æ˜é€‰æ‹©ç†ç”±

4. **é£é™©æç¤º** (50-100å­—)
   - å½“å‰å¸‚åœºçš„ä¸»è¦é£é™©
   - éœ€è¦æ³¨æ„çš„äº‹é¡¹

## è¾“å‡ºæ ¼å¼

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡º:

```json
{{
  "market_analysis": "å½“å‰å¸‚åœºåˆ†æ...",
  "strategy_evaluation": "ç­–ç•¥é€‚ç”¨æ€§è¯„ä¼°...",
  "selected_strategies": [
    {{
      "strategy_name": "ema_trend",
      "weight": 0.6,
      "confidence": 0.85,
      "reasoning": "é€‰æ‹©ç†ç”±..."
    }}
  ],
  "risk_warning": "é£é™©æç¤º..."
}}
```

ç°åœ¨è¯·å¼€å§‹åˆ†æå¹¶é€‰æ‹©ç­–ç•¥ã€‚
"""
        return prompt
    
    def _format_strategy_library(self) -> str:
        """æ ¼å¼åŒ–ç­–ç•¥åº“ä¿¡æ¯"""
        output = []
        for name, strategy in self.strategy_library.strategies.items():
            meta = strategy.metadata
            output.append(f"""
### {meta.name} ({name})
- ç±»å‹: {meta.type.value}
- é€‚ç”¨å¸‚åœº: {', '.join(meta.é€‚ç”¨å¸‚åœº)}
- é£é™©ç­‰çº§: {meta.é£é™©ç­‰çº§}
- é¢„æœŸæ”¶ç›Š: {meta.é¢„æœŸæ”¶ç›Š}
- å†å²èƒœç‡: {meta.èƒœç‡*100:.1f}%
- å¤æ™®ç‡: {meta.å¤æ™®ç‡:.2f}
- æœ€å¤§å›æ’¤: {meta.æœ€å¤§å›æ’¤*100:.1f}%
- æè¿°: {meta.description}
""")
        return "\n".join(output)
    
    def _format_historical_performance(self, performance: Dict) -> str:
        """æ ¼å¼åŒ–å†å²è¡¨ç°æ•°æ®"""
        output = []
        for strategy_name, perf in performance.items():
            output.append(f"""
**{strategy_name}**:
- æœ€è¿‘7å¤©èƒœç‡: {perf['win_rate_7d']*100:.1f}%
- æœ€è¿‘7å¤©æ”¶ç›Šç‡: {perf['return_7d']*100:.1f}%
- æœ€è¿‘30å¤©èƒœç‡: {perf['win_rate_30d']*100:.1f}%
- æœ€è¿‘30å¤©æ”¶ç›Šç‡: {perf['return_30d']*100:.1f}%
- æœ€è¿‘ä½¿ç”¨æ—¶é—´: {perf['last_used']}
""")
        return "\n".join(output)
    
    async def select_strategy(
        self,
        market_data: Dict,
        technical_analysis: Dict,
        historical_performance: Dict
    ) -> Dict:
        """é€‰æ‹©ç­–ç•¥"""
        
        # æ„å»º Prompt
        prompt = self.build_selection_prompt(
            market_data,
            technical_analysis,
            historical_performance
        )
        
        # è°ƒç”¨ LLM
        response = await self.llm_client.chat(
            messages=[
                {"role": "system", "content": "ä½ æ˜¯ä¸“ä¸šçš„é‡åŒ–äº¤æ˜“ç­–ç•¥é€‰æ‹©ä¸“å®¶ã€‚"},
                {"role": "user", "content": prompt}
            ],
            temperature=0.3,  # é™ä½éšæœºæ€§
            response_format={"type": "json_object"}
        )
        
        # è§£æå“åº”ï¼ˆPydantic Schema æ ¡éªŒï¼Œå¤±è´¥ç›´æ¥ä¸æ“ä½œï¼‰
        result = StrategySelection.model_validate_json(response['content'])
        if not result:
            return None
        
        # éªŒè¯å’ŒåŠ è½½ç­–ç•¥
        selected_strategies = []
        for strategy_info in result.selected_strategies:
            strategy = self.strategy_library.get_strategy(
                strategy_info.strategy_name
            )
            if strategy:
                selected_strategies.append({
                    'strategy': strategy,
                    'weight': strategy_info.weight,
                    'confidence': strategy_info.confidence,
                    'reasoning': strategy_info.reasoning
                })
        
        return {
            'market_analysis': result.market_analysis,
            'strategy_evaluation': result.strategy_evaluation,
            'selected_strategies': selected_strategies,
            'risk_warning': result.risk_warning
        }
```

### 5.3 LLM å®‰å…¨é—¨

- LLM è¾“å‡ºå¿…é¡»é€šè¿‡ Pydantic Schema æ ¡éªŒï¼Œå¤±è´¥åˆ™ä¸æ“ä½œ
- æ æ†/ä»“ä½/é£é™©å¿…é¡»åœ¨ç¡¬ç¼–ç  `MAX_LIMIT` èŒƒå›´å†…
- å¤±è´¥/æ‹’ç»çš„å“åº”å†™å…¥å®¡è®¡æ—¥å¿—ï¼Œä¾¿äºç¦»çº¿å¤ç›˜

---

## 6. å¼ºåŒ–å­¦ä¹ æœºåˆ¶

### 6.1 è®¾è®¡ç›®æ ‡

é€šè¿‡ç¦»çº¿è®­ç»ƒ/è¯„ä¼°,è®©ç³»ç»Ÿèƒ½å¤Ÿ:

1. **å­¦ä¹ ç­–ç•¥é€‰æ‹©** - ç¦»çº¿è®­ç»ƒç­–ç•¥è¯„åˆ†/é€‰æ‹©æ¨¡å‹
2. **è¯„ä¼°å‚æ•°** - ç¦»çº¿è¯„ä¼°å‚æ•°æœ‰æ•ˆæ€§ï¼ˆä¸åœ¨çº¿ä¿®æ”¹ï¼‰
3. **é€‚åº”å¸‚åœºå˜åŒ–** - å®šæœŸå†è®­ç»ƒ/å†è¯„ä¼°
4. **ç”Ÿæˆå‘å¸ƒç‰©** - ç­–ç•¥è¯„åˆ†/Prompt ç‰ˆæœ¬å®šæœŸæ›´æ–°

### 6.2 ç¦»çº¿è®­ç»ƒæ¡†æ¶

```python
# reinforcement/rl_optimizer.py

import numpy as np
from typing import Dict, List, Tuple
from dataclasses import dataclass


@dataclass
class State:
    """çŠ¶æ€å®šä¹‰"""
    # å¸‚åœºç‰¹å¾
    price: float
    volume: float
    volatility: float
    
    # æŠ€æœ¯æŒ‡æ ‡
    rsi: float
    macd: float
    ema_5: float
    ema_20: float
    
    # å¸‚åœºçŠ¶æ€
    trend_direction: str  # "up", "down", "sideways"
    trend_strength: float  # 0-1
    
    # å†å²è¡¨ç°
    recent_win_rate: float
    recent_return: float


@dataclass
class Action:
    """åŠ¨ä½œå®šä¹‰"""
    strategy_name: str
    params: Dict[str, float]


@dataclass
class Reward:
    """å¥–åŠ±å®šä¹‰"""
    return_pct: float  # æ”¶ç›Šç‡
    sharpe_ratio: float  # å¤æ™®ç‡
    max_drawdown: float  # æœ€å¤§å›æ’¤
    win_rate: float  # èƒœç‡
    
    def calculate_total_reward(self) -> float:
        """è®¡ç®—æ€»å¥–åŠ±"""
        # åŠ æƒç»„åˆå¤šä¸ªæŒ‡æ ‡
        reward = (
            self.return_pct * 0.4 +
            self.sharpe_ratio * 0.3 -
            self.max_drawdown * 0.2 +
            self.win_rate * 0.1
        )
        return reward


class RLOptimizer:
    """å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–å™¨"""
    
    def __init__(self):
        self.experience_buffer = []  # ç»éªŒå›æ”¾ç¼“å†²åŒº
        self.strategy_performance = {}  # ç­–ç•¥è¡¨ç°è®°å½•
    
    def record_experience(
        self,
        state: State,
        action: Action,
        reward: Reward,
        next_state: State
    ):
        """è®°å½•ç»éªŒ"""
        self.experience_buffer.append({
            'state': state,
            'action': action,
            'reward': reward,
            'next_state': next_state,
            'timestamp': datetime.now()
        })
        
        # æ›´æ–°ç­–ç•¥è¡¨ç°
        if action.strategy_name not in self.strategy_performance:
            self.strategy_performance[action.strategy_name] = []
        
        self.strategy_performance[action.strategy_name].append({
            'state': state,
            'reward': reward.calculate_total_reward(),
            'timestamp': datetime.now()
        })
    
    def analyze_strategy_performance(self) -> Dict:
        """åˆ†æç­–ç•¥è¡¨ç°"""
        analysis = {}
        
        for strategy_name, records in self.strategy_performance.items():
            if not records:
                continue
            
            rewards = [r['reward'] for r in records]
            
            analysis[strategy_name] = {
                'avg_reward': np.mean(rewards),
                'std_reward': np.std(rewards),
                'max_reward': np.max(rewards),
                'min_reward': np.min(rewards),
                'total_uses': len(records),
                
                # æŒ‰å¸‚åœºçŠ¶æ€åˆ†ç»„åˆ†æ
                'performance_by_trend': self._analyze_by_trend(records),
                'performance_by_volatility': self._analyze_by_volatility(records)
            }
        
        return analysis
    
    def _analyze_by_trend(self, records: List[Dict]) -> Dict:
        """æŒ‰è¶‹åŠ¿åˆ†æè¡¨ç°"""
        by_trend = {'up': [], 'down': [], 'sideways': []}
        
        for record in records:
            trend = record['state'].trend_direction
            by_trend[trend].append(record['reward'])
        
        return {
            trend: {
                'avg_reward': np.mean(rewards) if rewards else 0,
                'count': len(rewards)
            }
            for trend, rewards in by_trend.items()
        }
    
    def _analyze_by_volatility(self, records: List[Dict]) -> Dict:
        """æŒ‰æ³¢åŠ¨ç‡åˆ†æè¡¨ç°"""
        by_volatility = {'low': [], 'medium': [], 'high': []}
        
        for record in records:
            vol = record['state'].volatility
            if vol < 0.02:
                category = 'low'
            elif vol < 0.05:
                category = 'medium'
            else:
                category = 'high'
            by_volatility[category].append(record['reward'])
        
        return {
            vol_level: {
                'avg_reward': np.mean(rewards) if rewards else 0,
                'count': len(rewards)
            }
            for vol_level, rewards in by_volatility.items()
        }
    
    def generate_learning_insights(self) -> str:
        """ç”Ÿæˆå­¦ä¹ æ´å¯Ÿ"""
        analysis = self.analyze_strategy_performance()
        
        insights = []
        insights.append("## ç­–ç•¥è¡¨ç°åˆ†æ\n")
        
        # æ‰¾å‡ºè¡¨ç°æœ€å¥½çš„ç­–ç•¥
        best_strategies = sorted(
            analysis.items(),
            key=lambda x: x[1]['avg_reward'],
            reverse=True
        )[:3]
        
        insights.append("### è¡¨ç°æœ€ä½³çš„ç­–ç•¥:\n")
        for strategy_name, perf in best_strategies:
            insights.append(f"- **{strategy_name}**: å¹³å‡å¥–åŠ± {perf['avg_reward']:.3f}, ä½¿ç”¨æ¬¡æ•° {perf['total_uses']}")
        
        # æŒ‰å¸‚åœºç¯å¢ƒåˆ†æ
        insights.append("\n### å¸‚åœºç¯å¢ƒé€‚åº”æ€§:\n")
        for strategy_name, perf in analysis.items():
            insights.append(f"\n**{strategy_name}**:")
            for trend, trend_perf in perf['performance_by_trend'].items():
                if trend_perf['count'] > 0:
                    insights.append(f"  - {trend}å¸‚åœº: å¹³å‡å¥–åŠ± {trend_perf['avg_reward']:.3f} ({trend_perf['count']}æ¬¡)")
        
        return "\n".join(insights)
    
    def update_llm_prompt(self) -> str:
        """ç¦»çº¿ç”Ÿæˆ Prompt ç‰ˆæœ¬ï¼ˆå‘å¸ƒæ—¶ä½¿ç”¨ï¼‰"""
        insights = self.generate_learning_insights()
        
        prompt_addition = f"""
## å†å²å­¦ä¹ ç»éªŒ

åŸºäºè¿‡å»çš„äº¤æ˜“ç»éªŒ,æˆ‘ä»¬å‘ç°:

{insights}

è¯·åœ¨é€‰æ‹©ç­–ç•¥æ—¶å‚è€ƒè¿™äº›å†å²ç»éªŒã€‚
"""
        return prompt_addition
```

---

## 7. å®Œæ•´å·¥ä½œæµç¨‹

### 7.1 äº¤æ˜“å‘¨æœŸæµç¨‹

```
1. æ•°æ®é‡‡é›†
   â†“
2. æŠ€æœ¯åˆ†æ
   â†“
3. å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©ï¼ˆä½¿ç”¨ç¦»çº¿å‘å¸ƒçš„ç­–ç•¥è¯„åˆ†/Promptï¼‰
   â†“
4. ç­–ç•¥æ‰§è¡Œ
   â†“
5. é£é™©æ£€æŸ¥
   â†“
6. äº¤æ˜“æ‰§è¡Œ
   â†“
7. ç»“æœè®°å½•ï¼ˆç”¨äºç¦»çº¿è®­ç»ƒï¼‰
   â†“
(å¾ªç¯)
```

ç¦»çº¿è®­ç»ƒä¸åœ¨äº¤æ˜“å¾ªç¯å†…è¿è¡Œï¼Œç”±å®šæ—¶ä»»åŠ¡/æ‰¹å¤„ç†å®šæœŸäº§å‡ºç­–ç•¥è¯„åˆ†ä¸ Prompt ç‰ˆæœ¬ã€‚

### 7.2 ä»£ç å®ç°

```python
# main_trading_loop.py

async def trading_loop():
    """ä¸»äº¤æ˜“å¾ªç¯"""
    
    # åˆå§‹åŒ–ç»„ä»¶
    data_collector = MarketDataCollector()
    technical_analyzer = TechnicalAnalysisAgent()
    strategy_selector = LLMStrategySelector(llm_client)
    risk_manager = RiskManager()
    order_executor = OrderExecutor()  # OKX æ¨¡æ‹Ÿç›˜ / å›æµ‹æ’®åˆ
    order_lifecycle = OrderLifecycleManager(order_executor)
    performance_store = PerformanceStore()  # ç¦»çº¿è®­ç»ƒäº§ç‰©
    
    while True:
        try:
            # 1. é‡‡é›†å¸‚åœºæ•°æ®
            market_data = await data_collector.fetch_latest_data("BTC/USDT:USDT", "1h")
            
            # 2. æŠ€æœ¯åˆ†æ
            technical_analysis = technical_analyzer.analyze(market_data)
            
            # 3. è·å–å†å²ç­–ç•¥è¡¨ç°
            historical_performance = performance_store.get_latest_snapshot()
            
            # 4. å¤§æ¨¡å‹é€‰æ‹©ç­–ç•¥
            selection_result = await strategy_selector.select_strategy(
                market_data=market_data,
                technical_analysis=technical_analysis,
                historical_performance=historical_performance
            )
            
            # LLM å¤±è´¥æˆ–æ ¡éªŒå¤±è´¥åˆ™ä¸æ“ä½œ
            if not selection_result or not selection_result['selected_strategies']:
                await asyncio.sleep(60)
                continue

            # 5. æ‰§è¡Œé€‰ä¸­çš„ç­–ç•¥
            for strategy_info in selection_result['selected_strategies']:
                strategy = strategy_info['strategy']
                
                # ç”Ÿæˆäº¤æ˜“ä¿¡å·
                signal = strategy.generate_signal(market_data)
                
                if signal['action'] != 'hold':
                    # 6. é£é™©æ£€æŸ¥
                    risk_check = risk_manager.check(signal, market_data)
                    
                    if risk_check['passed']:
                        # 7. æ‰§è¡Œäº¤æ˜“
                        trade_result = await order_lifecycle.execute(signal)
                        
                        # 8. è®°å½•ç»éªŒ
                        state = State(
                            price=market_data['price'],
                            volume=market_data['volume'],
                            volatility=technical_analysis['volatility'],
                            rsi=technical_analysis['rsi'],
                            macd=technical_analysis['macd'],
                            ema_5=technical_analysis['ema_5'],
                            ema_20=technical_analysis['ema_20'],
                            trend_direction=technical_analysis['trend_direction'],
                            trend_strength=technical_analysis['trend_strength'],
                            recent_win_rate=historical_performance.get('win_rate', 0),
                            recent_return=historical_performance.get('return', 0)
                        )
                        
                        action = Action(
                            strategy_name=strategy.metadata.name,
                            params=strategy.params
                        )
                        
                        # ç­‰å¾…äº¤æ˜“å®Œæˆåè®¡ç®—å¥–åŠ±
                        # (è¿™é‡Œç®€åŒ–å¤„ç†,å®é™…éœ€è¦å¼‚æ­¥ç­‰å¾…)
                        reward = Reward(
                            return_pct=trade_result['return_pct'],
                            sharpe_ratio=trade_result['sharpe_ratio'],
                            max_drawdown=trade_result['max_drawdown'],
                            win_rate=trade_result['win_rate']
                        )
                        
                        performance_store.record_experience(state, action, reward, state)
            
            # 9. ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ
            await asyncio.sleep(3600)  # 1å°æ—¶
        
        except Exception as e:
            logger.error(f"Trading loop error: {e}")
            await asyncio.sleep(60)
```

---

## 8. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 8.1 æŠ€æœ¯æ ˆ

- **Python 3.11+**
- **FastAPI** - Web API
- **ccxt** - äº¤æ˜“æ‰€æ¥å£
- **pandas/numpy** - æ•°æ®å¤„ç†
- **DeepSeek/OpenAI** - å¤§æ¨¡å‹
- **SQLite/PostgreSQL** - æ•°æ®å­˜å‚¨
- **Redis** - ç¼“å­˜
- **Celery** - å¼‚æ­¥ä»»åŠ¡

### 8.2 ç›®å½•ç»“æ„

```
kaifa_wenjian-25-1217/
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ strategy_library.py      # ç­–ç•¥åº“
â”‚   â”œâ”€â”€ trend_following.py       # è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥
â”‚   â”œâ”€â”€ mean_reversion.py        # å‡å€¼å›å½’ç­–ç•¥
â”‚   â”œâ”€â”€ breakout.py              # çªç ´ç­–ç•¥
â”‚   â”œâ”€â”€ grid_trading.py          # ç½‘æ ¼äº¤æ˜“ç­–ç•¥
â”‚   â”œâ”€â”€ momentum.py              # åŠ¨é‡ç­–ç•¥
â”‚   â”œâ”€â”€ funding_rate_arbitrage.py # èµ„é‡‘è´¹ç‡å¥—åˆ©
â”‚   â”œâ”€â”€ onchain_signals.py       # é“¾ä¸Šä¿¡å·ç­–ç•¥
â”‚   â”œâ”€â”€ time_cycle.py            # æ—¶é—´å‘¨æœŸç­–ç•¥
â”‚   â””â”€â”€ volatility.py            # æ³¢åŠ¨ç‡ç­–ç•¥
â”‚
â”œâ”€â”€ decision/
â”‚   â”œâ”€â”€ llm_strategy_selector.py # å¤§æ¨¡å‹ç­–ç•¥é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ prompt_builder.py        # Prompt æ„å»ºå™¨
â”‚   â””â”€â”€ decision_engine.py       # å†³ç­–å¼•æ“
â”‚
â”œâ”€â”€ reinforcement/
â”‚   â”œâ”€â”€ rl_optimizer.py          # å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–å™¨
â”‚   â”œâ”€â”€ experience_buffer.py     # ç»éªŒå›æ”¾ç¼“å†²åŒº
â”‚   â””â”€â”€ reward_calculator.py     # å¥–åŠ±è®¡ç®—å™¨
â”‚
â”œâ”€â”€ execution/
â”‚   â”œâ”€â”€ order_executor.py        # OrderExecutor æ¥å£
â”‚   â”œâ”€â”€ order_lifecycle.py       # è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”‚   â”œâ”€â”€ position_manager.py      # æŒä»“ç®¡ç†å™¨
â”‚   â””â”€â”€ order_manager.py         # è®¢å•ç®¡ç†å™¨
â”‚
â””â”€â”€ main_trading_loop.py         # ä¸»äº¤æ˜“å¾ªç¯
```

---

## 9. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### 9.1 ç«‹å³å¯åš

1. **å®ç°ç­–ç•¥åº“** - å…ˆå®ç° 3-5 ä¸ªæ ¸å¿ƒç­–ç•¥
2. **å®Œå–„å¤§æ¨¡å‹é€‰æ‹©å™¨** - ä¼˜åŒ– Prompt è®¾è®¡
3. **æ„å»ºåŸºç¡€å¼ºåŒ–å­¦ä¹ æ¡†æ¶** - è®°å½•å’Œåˆ†æç»éªŒ

### 9.2 ä¸­æœŸç›®æ ‡

1. **æ·»åŠ æ›´å¤šç­–ç•¥** - æ‰©å±•åˆ° 15-20 ä¸ªç­–ç•¥
2. **ä¼˜åŒ–å¼ºåŒ–å­¦ä¹ ** - ä½¿ç”¨ DQN/PPO ç®—æ³•
3. **å®Œå–„å›æµ‹ç³»ç»Ÿ** - éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§

### 9.3 é•¿æœŸç›®æ ‡

1. **å•å¸ç§ç¨³å®šè¿è¡Œ** - å®Œæˆ OKX æ¨¡æ‹Ÿç›˜éªŒè¯å¹¶æ”¯æŒå®ç›˜åˆ‡æ¢
2. **å¤šæ—¶é—´æ¡†æ¶** - æ”¯æŒ 1m, 5m, 15m, 1h, 4h, 1d
3. **å®ç›˜è‡ªåŠ¨åŒ–** - 7x24 å°æ—¶è‡ªåŠ¨äº¤æ˜“

---

**æ–‡æ¡£ç»“æŸ**

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¤šç­–ç•¥æ™ºèƒ½ä½“äº¤æ˜“ç³»ç»Ÿæ¶æ„è®¾è®¡ã€‚æ‚¨å¯ä»¥åŸºäºè¿™ä¸ªè®¾è®¡åœ¨ Cursor ä¸­é€æ­¥å®ç°å„ä¸ªæ¨¡å—ï¼
