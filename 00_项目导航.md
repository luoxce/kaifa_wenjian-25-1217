# 项目导航（Alpha Arena / kaifa_wenjian）

## 这个文件夹在做什么

本文件夹是一个可完全本地运行的「交易决策 + 风险校验 + 回测/模拟盘 + Web 仪表盘」原型：

- 输入：账户/行情/仓位快照（`sample_data/`）或数据库行情（`data/market_data.db`）+ 可选 OKX 实时行情。
- 核心流程：技术分析 Agent → LLM（DeepSeek/Qwen 等）生成决策 → 风控校验 → 记录到 `output/history/`。
- 运行方式：CLI 脚本 + FastAPI 仪表盘（`fastapi_app.py` + `static/`）。

---

## 最常用入口（先跑通）

1. 安装依赖：`pip install -r requirements.txt`
2. 配置：复制 `.env.example` 为 `.env`，按需填写 `DEEPSEEK_API_KEY`、`OKX_*`、代理等
3. 离线决策（不调用 LLM）：`python run_decision.py --offline --save-output`
4. 在线决策（OKX 行情）：`python run_decision.py --live-market --save-output`
5. 启动网页：`uvicorn fastapi_app:app --reload` → 打开 `http://127.0.0.1:8000/`

---

## 目录结构（按职责）

- `src/`：核心代码（LLM 客户端、策略、风控、数据采集、回测引擎等）
- `api/`：FastAPI 路由与 schema（`fastapi_app.py` 会挂载它）
- `static/`：网页前端（仪表盘 + 交易平台页面）
- `sample_data/`：离线演示用输入快照（account/market/positions/decision_mock）
- `data/`：运行时 SQLite 数据库（`market_data.db`、`paper_trading.db`）
- `output/`：运行输出与历史（`output/history/<run_id>/...`、回测报告等）
- `docs/`：说明文档（已从根目录整理进来，见 `docs/README.md`）
- `datasets/`：较大的数据文件（CSV 等）
- `examples/`：示例/实验脚本（非主流程）
- `models/`：本地大模型目录（自行下载放这里，仓库默认忽略权重）
- `debug/`：LLM 解析失败时的原始内容落盘（便于排查 prompt/解析器问题）
- `bootstrap.py`：统一的路径引导（CLI/API 导入一致）

入口脚本（根目录）：

- `run_decision.py`：决策 + 风控 + 历史记录
- `update_market_data.py`：行情数据采集/更新/统计
- `run_backtest.py`：回测执行与报告生成（依赖 `backtest_config.yaml`）
- `run_paper_trading.py`：模拟盘引擎（简化版本）
- `fastapi_app.py`：Web 服务入口（FastAPI + 静态页面）

---

## 文档怎么读（按场景）

- 总览/架构：`README.md`
- 文档索引：`docs/README.md`
- 快速起步（含数据准备）：`docs/guides/快速开始指南.md`
- 网页与交易平台：`docs/guides/启动网页服务.md`、`docs/guides/网页访问指南.md`、`docs/guides/交易平台使用说明.md`
- 数据采集与数据库：`docs/guides/数据采集系统使用说明.md`、`docs/guides/检查K线数据.md`
- 技术分析集成：`docs/guides/当前系统状态说明.md`、`docs/guides/技术分析集成说明.md`
- 回测与模拟盘：`docs/guides/回测系统使用说明.md`
- 本地 Qwen 模型：`docs/guides/本地模型快速开始.md`、`docs/guides/本地Qwen模型使用说明.md`
- 规划/改进：`docs/notes/架构分析与改进建议.md`、`docs/notes/下一步行动计划.md`、`docs/notes/集成完成总结.md`、`docs/notes/系统升级总结.md`

---

## 为什么看起来“乱”

- 根目录同时混了：入口脚本 + 配置 + 运行产物（历史、db、缓存）。
- 运行产物会越用越多：`output/history`、`*.db`、`__pycache__`、`.venv*`。

---

## 后续可选整理（需要我动手的话告诉我）

- 增加一个清理脚本（例如按时间/数量清理 `output/history/`、清理 `__pycache__`）
- 把零散小工具脚本集中到 `tools/`（如果你希望根目录更“干净”）
